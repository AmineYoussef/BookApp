<div class="container" fxLayout="row" fxLayoutAlign="space-around center">
    <mat-card pad>
        <div class="col-md-6">
            <div *ngIf="isSignup">
                <h3>Create Account</h3>
                <button mat-stroked-button (click)="changeType('login')">
                    Returning User?
                </button>
            </div>

            <div *ngIf="isLogin">
                <h3>Sign In</h3>
                <button mat-stroked-button (click)="changeType('signup')">
                    New User?
                </button>
            </div>

            <div *ngIf="isPasswordReset">
                <h3>Reset Password</h3>
                <button mat-stroked-button (click)="changeType('login')">
                    Back
                </button>
            </div>
        </div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <div class="row justify-content-center p-4">
                <div class="col-md-6">
                    <mat-form-field [color]="email.valid && 'accent'">
                        <input matInput formControlName="email" type="email" placeholder="Email" autocomplete="off" />
                        <mat-error *ngIf="email.invalid && email.dirty">
                            You must enter a valid email
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="col-md-6">
                    <mat-form-field [color]="email.valid && 'accent'" *ngIf="!isPasswordReset">
                        <input matInput formControlName="password" type="password" placeholder="Password"
                            autocomplete="off" />
                        <mat-error *ngIf="password.invalid && password.dirty">
                            Password must be at least 6 characters long
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="col-md-6">
                    <mat-form-field [color]="passwordDoesMatch ? 'accent' : 'warn' " *ngIf="isSignup">
                        <input matInput formControlName="passwordConfirm" type="password" placeholder="Confirm password"
                            autocomplete="off">

                        <mat-error *ngIf="!passwordDoesMatch && passwordConfirm.dirty">
                            Password does not match
                        </mat-error>
                    </mat-form-field>
                </div>

                <mat-error class="server-error">{{ serverMessage }}</mat-error>

                <button *ngIf="!isPasswordReset" mat-raised-button color="accent" type="submit"
                    [disabled]="form.invalid || !passwordDoesMatch || loading">
                    Submit
                </button>

                <button *ngIf="isPasswordReset" mat-raised-button color="accent" type="submit" [disabled]="loading">
                    Send Reset Email
                </button>
            </div>
        </form>
    </mat-card>
</div>